<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cartoon Clock (Slimy v0.8.1)</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%2032%2032%27%3E%0A%3Crect%20x%3D%272%27%20y%3D%272%27%20width%3D%2728%27%20height%3D%2728%27%20rx%3D%276%27%20fill%3D%27black%27%20stroke%3D%27white%27%20stroke-width%3D%272%27%2F%3E%0A%3Cpath%20d%3D%27M6%2016%20h20%20M16%206%20v20%27%20stroke%3D%27white%27%20stroke-width%3D%272%27%20stroke-linecap%3D%27round%27%2F%3E%0A%3C%2Fsvg%3E">

  <!-- Google Fonts: Noto Sans 100 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@100&display=swap" rel="stylesheet">

  <style>
    html, body { height:100%; margin:0; background:#000; color:#eee; }
    #canvas-holder { position:fixed; inset:0; background:#000; z-index:0; }
    #ui {
      position:fixed; left:10px; top:10px; z-index:99999;
      background:rgba(20,20,20,0.86); color:#eaeaea; border:1px solid rgba(255,255,255,0.2);
      border-radius:10px; padding:10px 14px; backdrop-filter:blur(4px);
      box-shadow:0 6px 20px rgba(0,0,0,0.4);
      font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      min-width: 280px;
    }
    #ui .row { margin:6px 0; }
    #ui .note { font-size:12px; color:#a8e6a1; }
  </style>
</head>
<body>
  <div id="ui">
    <div class="note">build v0.8.1 (slime: guided)</div>
    <div class="note" id="diag">診断: OK</div>
    <div class="row">
      <button id="btnCam">① カメラを許可して開始</button>
      <button id="btnSim">（最初はこれ）視線をシミュレーション開始</button>
    </div>
    <div class="row">
      <label><input type="checkbox" id="fakeSeen" checked> 見られている（シミュレーション）</label>
    </div>
    <div class="row">
      <label><input type="checkbox" id="togglePreview"> カメラプレビューを表示（デバッグ用）</label>
    </div>
  </div>

  <div id="camWrap" style="position:fixed;right:10px;bottom:10px;width:240px;z-index:50000;background:rgba(0,0,0,0.4);border:1px solid rgba(255,255,255,0.3);border-radius:10px;padding:6px;display:none;">
    <video id="cam" autoplay playsinline muted style="width:100%;height:auto;transform:scaleX(-1);display:block;"></video>
    <div class="overlay" style="position:absolute;inset:6px;pointer-events:none;border:1px dashed rgba(0,255,0,0.7);border-radius:8px;"></div>
  </div>

  <div id="canvas-holder"></div>

  <!-- p5 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
  <script src="./src/main.js" defer></script>
</body>
</html>
